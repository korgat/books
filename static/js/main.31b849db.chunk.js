(this["webpackJsonpbook-store1"]=this["webpackJsonpbook-store1"]||[]).push([[0],{205:function(e,t,o){},301:function(e,t,o){"use strict";o.r(t);var r=o(0),n=o.n(r),c=o(47),a=o.n(c),i=o(39),s=o(13),l=o(16),b=(o(205),o(14)),j=o(70),d=o(317),u=o(303),O=o(321),h=o(3),p=function(e){var t=e.title,o=e.image,r=e.author,n=e.description,c=e.rating,a=e.id,i=e.user,s=e.booksInLibrary,l=e.addBook,b=e.deleteBook;return Object(h.jsx)(O.a,{image:o,header:t,meta:r,description:Object(h.jsxs)("div",{children:[n,Object(h.jsxs)("div",{className:"btnBlock",children:[!s.includes(a)&&i&&Object(h.jsx)("div",{children:Object(h.jsx)(u.a,{onClick:function(){l({title:t,image:o,author:r,description:n,rating:c,id:a,bookInProgress:!0})},compact:!0,color:"green",size:"mini",children:"ADD"})}),i&&"admin@gmail.com"===i.email&&Object(h.jsx)("div",{children:Object(h.jsx)(u.a,{onClick:function(){b(a)},compact:!0,color:"red",size:"mini",children:"Delete"})})]})]})})},x=o(319),k=o(71),y=o(315),f=function(e){var t=e.sortDirection,o=e.searchString,n=e.setSearchString,c=Object(i.b)(),a=Object(r.useState)("title"),s=Object(l.a)(a,2),b=s[0],j=s[1],d=function(e,t){var o=t.name;j(o),c({type:"SET_SORT_TYPE",payload:o})},O=function(e){c(function(e){return{type:"SET_SORT_DIRECTION",payload:e}}(e))};return Object(h.jsx)("div",{className:"menu",children:Object(h.jsxs)(x.a,{pointing:!0,children:[Object(h.jsx)(x.a.Item,{children:" Sort by:"}),Object(h.jsx)(x.a.Item,{name:"title",active:"title"===b,onClick:d}),Object(h.jsx)(x.a.Item,{name:"author",active:"author"===b,onClick:d}),Object(h.jsx)(x.a.Item,{name:"rating",active:"rating"===b,onClick:d}),Object(h.jsxs)(x.a.Menu,{position:"right",children:[Object(h.jsx)(x.a.Item,{children:Object(h.jsxs)(u.a.Group,{children:[Object(h.jsx)(u.a,{onClick:function(){return O("asc")},positive:"asc"===t,children:Object(h.jsx)("div",{children:Object(h.jsx)(k.a,{name:"long arrow alternate up",size:"large"})})}),Object(h.jsx)(u.a.Or,{text:"or"}),Object(h.jsx)(u.a,{onClick:function(){return O("desc")},positive:"desc"===t,children:Object(h.jsx)("div",{children:Object(h.jsx)(k.a,{name:"long arrow alternate down",size:"large"})})})]})}),Object(h.jsx)(x.a.Item,{children:Object(h.jsx)(y.a,{icon:"search",value:o,onChange:function(e){return t=e.currentTarget.value,void n(t);var t},placeholder:"Search..."})})]})]})})},g=o(154);o(302),o(210);g.a.initializeApp({apiKey:"AIzaSyDj-njfnmrh2Yk7ayeGNpc_PJyKsJ4VyrU",authDomain:"my-library-5ae3e.firebaseapp.com",projectId:"my-library-5ae3e",storageBucket:"my-library-5ae3e.appspot.com",messagingSenderId:"784473889903",appId:"1:784473889903:web:b3d9738b9a73519357419a",measurementId:"G-XYZ53R27CK"});var m=g.a,v=function(e){var t=e.books,o=e.booksInLibrary,n=e.sortDirection,c=e.user,a=Object(i.b)(),b=Object(r.useState)(""),j=Object(l.a)(b,2),d=j[0],u=j[1],x=function(e){a(function(e){return function(t,o){t(function(e){return{type:"ADD_TO_LIBRARY",payload:e}}(e));var r=o().myLibrary,n=o().login.user;m.firestore().collection("UsersLibrary").doc(n.uid).update({books:r.books,booksIds:r.booksIds})}}(e))},k=function(e){m.firestore().collection("allBooks").doc(e).delete()};return Object(h.jsxs)("div",{children:[Object(h.jsx)(f,{setSearchString:u,searchString:d,sortDirection:n}),Object(h.jsx)(O.a.Group,{itemsPerRow:3,children:t.filter((function(e){return e.title.toLowerCase().indexOf(d.toLowerCase())>=0})).map((function(e,t){return Object(r.createElement)(p,Object(s.a)(Object(s.a)({user:c},e),{},{booksInLibrary:o,addBook:x,deleteBook:k,key:e.title+t}))}))})]})},S=o(320),I=o(328),C=o(324),L=o(325),T=function(e){var t=e.title,o=e.image,n=e.rating,c=e.id,a=e.myDescription,i=void 0===a?"leave your comment":a,s=e.bookInProgress,b=void 0===s||s,j=e.addDescription,d=e.setRating,O=e.handleBookStatus,p=e.deleteBook,x=Object(r.useState)(b),k=Object(l.a)(x,2),y=k[0],f=k[1],g=Object(r.useState)(""),m=Object(l.a)(g,2),v=m[0],I=m[1],T=Object(r.useState)(!1),_=Object(l.a)(T,2),B=_[0],D=_[1],E=function(){f(!y),O({bookInProgress:!y,id:c})};return Object(h.jsxs)(S.a.Row,{children:[Object(h.jsx)(S.a.Cell,{children:Object(h.jsx)(C.a,{as:"h2",textAlign:"center",children:Object(h.jsx)("img",{src:o,alt:"book"})})}),Object(h.jsxs)(S.a.Cell,{singleLine:!0,children:[t,Object(h.jsx)(u.a,{onClick:function(){p(c)},size:"mini",floated:"right",circular:!0,color:"google plus",icon:"trash alternate outline"})]}),Object(h.jsx)(S.a.Cell,{children:Object(h.jsx)(L.a,{onClick:function(e){d({id:c,rating:e.target.ariaPosInSet})},icon:"star",defaultRating:n,maxRating:10})}),Object(h.jsx)(S.a.Cell,{textAlign:"center",children:Object(h.jsx)("div",{children:y?Object(h.jsx)(u.a,{onClick:E,compact:!0,positive:!0,active:!0,children:"In Progress"}):Object(h.jsx)(u.a,{onClick:E,compact:!0,children:"Finished"})})}),Object(h.jsx)(S.a.Cell,{children:B?Object(h.jsx)("input",{value:v,onChange:function(e){return I(e.currentTarget.value)},onBlur:function(){D(!1),j({id:c,text:v})}}):Object(h.jsx)("div",{onClick:function(){return D(!0)},children:i})})]})},_=o(183),B=o.n(_),D=function(e){var t=e.chosenBooks,o=e.sortType,n=e.sortDirection,c=e.searchString,a=Object(i.b)(),b=Object(r.useState)(!0),j=Object(l.a)(b,2),d=j[0],u=j[1],O=function(e){a(function(e){return function(t,o){t(function(e){return{type:"ADD_MY_DESCRIPTION",payload:e}}(e));var r=o().myLibrary,n=o().login.user;m.firestore().collection("UsersLibrary").doc(n.uid).update({books:r.books})}}(e))},p=function(e){a(function(e){return function(t,o){t(function(e){return{type:"SET_MY_RATING",payload:e}}(e));var r=o().myLibrary,n=o().login.user;m.firestore().collection("UsersLibrary").doc(n.uid).update({books:r.books})}}(e))},x=function(e){a(function(e){return function(t,o){t(function(e){return{type:"SET_BOOK_STATUS",payload:e}}(e));var r=o().myLibrary,n=o().login.user;m.firestore().collection("UsersLibrary").doc(n.uid).update({books:r.books})}}(e))},k=function(e){a(function(e){return function(t,o){t(function(e){return{type:"DELETE_BOOK",payload:e}}(e));var r=o().myLibrary,n=o().login.user;m.firestore().collection("UsersLibrary").doc(n.uid).update({books:r.books,booksIds:r.booksIds})}}(e))};return Object(h.jsxs)(S.a,{celled:!0,padded:!0,children:[Object(h.jsx)(S.a.Header,{children:Object(h.jsxs)(S.a.Row,{children:[Object(h.jsx)(S.a.HeaderCell,{singleLine:!0,children:"Cover"}),Object(h.jsx)(S.a.HeaderCell,{children:"Title"}),Object(h.jsx)(S.a.HeaderCell,{children:"Rating"}),Object(h.jsxs)(S.a.HeaderCell,{children:["Status",Object(h.jsx)("div",{children:Object(h.jsx)(I.a,{slider:!0,onClick:function(){u(!d)},label:{children:"Show finished"}})})]}),Object(h.jsx)(S.a.HeaderCell,{children:"My opinion"})]})}),Object(h.jsx)(S.a.Body,{children:B()(t,o,n).filter((function(e){return e.title.toLowerCase().indexOf(c.toLowerCase())>=0})).map((function(e,t){return d?e.bookInProgress?Object(h.jsx)(T,Object(s.a)(Object(s.a)({},e),{},{deleteBook:k,handleBookStatus:x,addDescription:O,setRating:p}),e.title+t):void 0:Object(h.jsx)(T,Object(s.a)(Object(s.a)({},e),{},{deleteBook:k,handleBookStatus:x,addDescription:O,setRating:p}),e.title+t)}))})]})},E=function(e){var t=e.chosenBooks,o=e.sortDirection,n=e.sortType,c=Object(r.useState)(""),a=Object(l.a)(c,2),i=a[0],s=a[1];return Object(h.jsxs)("div",{children:[Object(h.jsx)(f,{searchString:i,setSearchString:s,sortDirection:o}),Object(h.jsx)(D,{searchString:i,sortType:n,sortDirection:o,chosenBooks:t})]})},R=o(318),w=o(322),A=function(){var e=Object(r.useState)(""),t=Object(l.a)(e,2),o=t[0],n=t[1],c=Object(r.useState)(""),a=Object(l.a)(c,2),i=a[0],s=a[1],b=Object(r.useState)(""),j=Object(l.a)(b,2),d=j[0],u=j[1],O=Object(r.useState)(""),p=Object(l.a)(O,2),x=p[0],k=p[1],y=Object(r.useState)(""),f=Object(l.a)(y,2),g=f[0],v=f[1];return Object(h.jsx)("div",{className:"margin50",children:Object(h.jsxs)(R.a,{onSubmit:function(e){var t={title:o,author:i,rating:d,description:g};m.firestore().collection("allBooks").add(t),console.log({title:o,author:i,rating:d,description:g})},children:[Object(h.jsx)(R.a.Group,{children:Object(h.jsx)(R.a.Input,{value:o,onChange:function(e){return n(e.currentTarget.value)},label:"Book title",placeholder:"Book title",width:6})}),Object(h.jsx)(R.a.Group,{children:Object(h.jsx)(R.a.Input,{value:i,onChange:function(e){return s(e.currentTarget.value)},label:"Author",placeholder:"Author",width:6})}),Object(h.jsxs)(R.a.Group,{children:[Object(h.jsx)(R.a.Input,{value:x,onChange:function(e){return k(e.currentTarget.value)},label:"Book Image",placeholder:"http://...",width:12}),x?Object(h.jsx)("img",{src:x}):Object(h.jsx)(w.a,{style:{height:150,width:200},children:Object(h.jsx)(w.a.Image,{})})]}),Object(h.jsxs)(R.a.Group,{children:[Object(h.jsx)(R.a.Field,{label:"Book rating"}),Object(h.jsx)(L.a,{icon:"star",onClick:function(e){u(e.target.ariaPosInSet)},defaultRating:5,maxRating:10})]}),Object(h.jsx)(R.a.Field,{value:g,onChange:function(e){return v(e.currentTarget.value)},label:"Book description",control:"textarea",rows:"3"}),Object(h.jsx)(R.a.Field,{label:"Add book",control:"button",children:"Confirm"})]})})},P=o(326),Y=o(327),U=o(316),N=function(){var e=Object(r.useState)(""),t=Object(l.a)(e,2),o=t[0],n=t[1],c=Object(r.useState)(""),a=Object(l.a)(c,2),i=a[0],s=a[1],b=Object(r.useState)(""),j=Object(l.a)(b,2),d=j[0],O=j[1],p=Object(r.useState)(""),x=Object(l.a)(p,2),k=x[0],y=x[1],f=Object(r.useState)(!0),g=Object(l.a)(f,2),v=g[0],S=g[1];return Object(h.jsx)("div",{className:"margin50",children:Object(h.jsxs)(P.a,{placeholder:!0,children:[Object(h.jsxs)(Y.a,{columns:2,relaxed:"very",stackable:!0,children:[Object(h.jsx)(Y.a.Column,{children:Object(h.jsxs)(R.a,{children:[Object(h.jsx)(R.a.Input,{value:o,onChange:function(e){return n(e.currentTarget.value)},icon:"user",iconPosition:"left",label:"Email",placeholder:"Username",error:""!==d&&{content:d,pointing:"below"}}),Object(h.jsx)(R.a.Input,{value:i,onChange:function(e){return s(e.currentTarget.value)},icon:"lock",iconPosition:"left",label:"Password",type:"password",error:""!==k&&{content:k,pointing:"below"}}),v?Object(h.jsx)(u.a,{onClick:function(){m.auth().signInWithEmailAndPassword(o,i).catch((function(e){switch(e.code){case"auth/invalid-email":case"auth/user-disabled":case"auth/user-not-found":O(e.message);break;case"auth/wrong-password":y(e.message)}}))},content:"Login",primary:!0}):Object(h.jsx)(u.a,{onClick:function(){m.auth().createUserWithEmailAndPassword(o,i).then((function(e){m.firestore().collection("UsersLibrary").doc(e.user.uid).set({books:[],booksIds:[],userId:e.user.uid})})).catch((function(e){switch(console.log(e),e.code){case"auth/email-already-in-use":case"auth/invalid-email":O(e.message);break;case"auth/weak-password":y(e.message)}}))},content:"Sign Up",primary:!0})]})}),Object(h.jsx)(Y.a.Column,{verticalAlign:"middle",children:v?Object(h.jsx)(u.a,{onClick:function(){return S(!v)},content:"Sign up",icon:"signup",size:"big"}):Object(h.jsx)(u.a,{onClick:function(){return S(!v)},content:"Login",icon:"signup",size:"big"})})]}),Object(h.jsx)(U.a,{vertical:!0,children:"Or"})]})})},M=function(e){return{type:"SET_USER",payload:e}};var G=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return{allBooks:e.books.books,chosenBooks:e.myLibrary.books,booksInLibrary:e.myLibrary.booksIds,sortType:e.filter.sortType,sortDirection:e.filter.sortDirection,user:e.login.user,myLibrarySearch:e.myLibrary.searchString}})),o=t.allBooks,n=t.chosenBooks,c=t.booksInLibrary,a=t.sortType,O=t.sortDirection,p=t.user,x=t.myLibrarySearch,k=Object(r.useState)(!1),y=Object(l.a)(k,2),f=y[0],g=y[1];return Object(r.useEffect)((function(){var t=m.firestore().collection("allBooks").orderBy(a,O).onSnapshot((function(t){var o=t.docs.reduce((function(e,t){return e.push(Object(s.a)(Object(s.a)({},t.data()),{},{id:t.id})),e}),[]);e({type:"SET_ALL_BOOKS",payload:o})}));return m.auth().onAuthStateChanged((function(t){t?(m.firestore().collection("UsersLibrary").doc(t.uid).get().then((function(t){e({type:"SET_MY_LIBRARY",payload:t.data()})})),e(M(t))):e(M(""))})),function(){t()}}),[a,O]),Object(h.jsx)("div",{className:"app",children:Object(h.jsxs)(d.a,{children:[Object(h.jsxs)("div",{className:"btn",children:[p&&"admin@gmail.com"===p.email&&Object(h.jsx)("div",{children:Object(h.jsx)(j.b,{to:"/edit",children:Object(h.jsx)(u.a,{positive:!0,children:"Add book to library"})})}),Object(h.jsxs)("div",{children:[p?Object(h.jsx)(u.a,{onClick:function(){m.auth().signOut(),e({type:"CLEAR_MY_LIBRARY"})},primary:!0,children:"Logout"}):Object(h.jsx)(j.b,{to:"/login",children:Object(h.jsx)(u.a,{primary:!0,children:"Login/SignUp"})}),Object(h.jsx)(j.b,{to:"/books",children:Object(h.jsx)(u.a,{onClick:function(){return g(!1)},secondary:f,positive:!f,children:"Books"})}),Object(h.jsx)(j.b,{to:"/myLibrary",children:Object(h.jsx)(u.a,{onClick:function(){return g(!0)},positive:f,secondary:!f,children:"My library"})})]})]}),p?Object(h.jsxs)(b.d,{children:[Object(h.jsx)(b.b,{path:"/myLibrary",render:function(){return Object(h.jsx)(E,{chosenBooks:n,sortDirection:O,sortType:a,myLibrarySearch:x})}}),Object(h.jsx)(b.b,{path:"/books",exact:!0,render:function(){return Object(h.jsx)(v,{user:p,books:o,booksInLibrary:c,sortDirection:O})}}),Object(h.jsx)(b.b,{path:"/edit",render:function(){return Object(h.jsx)(A,{})}}),Object(h.jsx)(b.a,{to:"/books"})]}):Object(h.jsxs)(b.d,{children:[Object(h.jsx)(b.b,{path:"/myLibrary",render:function(){return Object(h.jsx)(E,{chosenBooks:n,sortDirection:O,sortType:a,myLibrarySearch:x})}}),Object(h.jsx)(b.b,{path:"/books",exact:!0,render:function(){return Object(h.jsx)(v,{books:o,booksInLibrary:c,sortDirection:O})}}),Object(h.jsx)(b.b,{path:"/edit",render:function(){return Object(h.jsx)(A,{})}}),Object(h.jsx)(b.b,{path:"/login",render:function(){return Object(h.jsx)(N,{})}})]})]})})},z=o(104),K={books:[]},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ALL_BOOKS":return{books:t.payload};default:return e}},F=o(62),J={booksIds:[],books:[]},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_LIBRARY":return{booksIds:[].concat(Object(F.a)(e.booksIds),[t.payload.id]),books:[].concat(Object(F.a)(e.books),[t.payload])};case"CLEAR_MY_LIBRARY":return{booksIds:[],books:[]};case"ADD_MY_DESCRIPTION":return Object(s.a)(Object(s.a)({},e),{},{books:Object(F.a)(e.books.map((function(e){return e.id===t.payload.id?Object(s.a)(Object(s.a)({},e),{},{myDescription:t.payload.text}):e})))});case"SET_MY_RATING":return Object(s.a)(Object(s.a)({},e),{},{books:Object(F.a)(e.books.map((function(e){return e.id===t.payload.id?Object(s.a)(Object(s.a)({},e),{},{rating:t.payload.rating}):e})))});case"SET_BOOK_STATUS":return Object(s.a)(Object(s.a)({},e),{},{books:Object(F.a)(e.books.map((function(e){return e.id===t.payload.id?Object(s.a)(Object(s.a)({},e),{},{bookInProgress:t.payload.bookInProgress}):e})))});case"DELETE_BOOK":return Object(s.a)(Object(s.a)({},e),{},{booksIds:Object(F.a)(e.booksIds.filter((function(e){return e!==t.payload}))),books:Object(F.a)(e.books.filter((function(e){return e.id!==t.payload})))});case"SET_MY_LIBRARY":return Object(s.a)(Object(s.a)({},e),{},{books:t.payload.books,booksIds:t.payload.booksIds});default:return e}},V={sortType:"title",sortDirection:"asc"},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SORT_TYPE":return Object(s.a)(Object(s.a)({},e),{},{sortType:t.payload});case"SET_SORT_DIRECTION":return Object(s.a)(Object(s.a)({},e),{},{sortDirection:t.payload});default:return e}},Z={user:""},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return{user:t.payload};default:return e}},Q=o(184),$=Object(z.b)({books:H,myLibrary:X,filter:W,login:q}),ee=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||z.c,te=Object(z.d)($,ee(Object(z.a)(Q.a)));o(300);a.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(j.a,{children:Object(h.jsx)(i.a,{store:te,children:Object(h.jsx)(G,{})})})}),document.getElementById("root"))}},[[301,1,2]]]);
//# sourceMappingURL=main.31b849db.chunk.js.map